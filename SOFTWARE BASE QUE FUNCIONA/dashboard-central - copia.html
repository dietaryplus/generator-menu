<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Redox Professional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-black: #1a1a1a;
            --secondary-black: #2d2d2d;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #666666;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --white: #ffffff;
            --border-light: #e8e8e8;
            --shadow-light: rgba(0, 0, 0, 0.04);
            --shadow-medium: rgba(0, 0, 0, 0.08);
            --shadow-dark: rgba(0, 0, 0, 0.12);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--light-gray);
            color: var(--text-primary);
            line-height: 1.5;
        }
        
        /* LAYOUT PRINCIPAL */
        .app-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        /* SIDEBAR */
        .sidebar {
            width: 280px;
            background: var(--white);
            border-right: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            transition: width 0.3s ease;
        }
        
        .sidebar.collapsed {
            width: 80px;
        }
        
        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .logo {
            width: 40px;
            height: 40px;
            background: var(--primary-black);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .logo-text {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            transition: opacity 0.3s;
        }
        
        .sidebar.collapsed .logo-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 16px 0;
            overflow-y: auto;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
            border: none;
            background: none;
            width: 100%;
            cursor: pointer;
            font-size: 14px;
        }
        
        .nav-item:hover {
            background: var(--light-gray);
            color: var(--text-primary);
        }
        
        .nav-item.active {
            background: var(--primary-black);
            color: var(--white);
        }
        
        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 16px;
        }
        
        .nav-text {
            transition: opacity 0.3s;
        }
        
        .sidebar.collapsed .nav-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .sidebar.collapsed .nav-item {
            justify-content: center;
            padding: 12px;
        }
        
        .sidebar.collapsed .nav-icon {
            margin-right: 0;
        }
        
        .sidebar-toggle {
            position: absolute;
            right: -12px;
            top: 32px;
            width: 24px;
            height: 24px;
            background: var(--white);
            border: 1px solid var(--border-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 10;
        }
        
        .sidebar-toggle:hover {
            background: var(--light-gray);
        }
        
        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .main-header {
            background: var(--white);
            border-bottom: 1px solid var(--border-light);
            padding: 20px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 8px 16px;
            border: 1px solid var(--border-light);
            border-radius: 6px;
            background: var(--white);
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: var(--light-gray);
        }
        
        .btn-primary {
            background: var(--primary-black);
            color: var(--white);
            border-color: var(--primary-black);
        }
        
        .btn-primary:hover {
            background: var(--secondary-black);
        }
        
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
        }
        
        /* MODALES */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-header {
            padding: 24px 32px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: background 0.2s;
        }
        
        .modal-close:hover {
            background: var(--light-gray);
        }
        
        .modal-content {
            padding: 32px;
        }
        
        /* CARDS Y GRIDS */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--white);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 24px;
            transition: box-shadow 0.2s;
        }
        
        .stat-card:hover {
            box-shadow: 0 4px 12px var(--shadow-light);
        }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .stat-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-icon {
            width: 40px;
            height: 40px;
            background: var(--light-gray);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .stat-change {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .action-card {
            background: var(--white);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 20px;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s;
            cursor: pointer;
            text-align: center;
        }
        
        .action-card:hover {
            box-shadow: 0 4px 12px var(--shadow-light);
            transform: translateY(-2px);
        }
        
        .action-icon {
            width: 48px;
            height: 48px;
            background: var(--light-gray);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin: 0 auto 12px;
        }
        
        .action-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .action-description {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* FORMS */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
        }
        
        .form-section {
            background: var(--white);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 24px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s;
            background: var(--white);
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary-black);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        /* TABLES */
        .table-container {
            background: var(--white);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th,
        .table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }
        
        .table th {
            background: var(--light-gray);
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .table td {
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .table tbody tr:hover {
            background: var(--light-gray);
        }
        
        /* LOADING */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-light);
            border-top: 2px solid var(--primary-black);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* SECTION VISIBILITY */
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                z-index: 100;
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .content-area {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">R</div>
                <div class="logo-text">Redox Professional</div>
                <button class="sidebar-toggle" onclick="toggleSidebar()">←</button>
            </div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" onclick="showSection('dashboard')">
                    <div class="nav-icon">📊</div>
                    <div class="nav-text">Dashboard</div>
                </button>
                <button class="nav-item" onclick="showSection('pacientes')">
                    <div class="nav-icon">👥</div>
                    <div class="nav-text">Pacientes</div>
                </button>
                <button class="nav-item" onclick="showSection('planes')">
                    <div class="nav-icon">📋</div>
                    <div class="nav-text">Planes</div>
                </button>
                <button class="nav-item" onclick="showSection('seguimiento')">
                    <div class="nav-icon">📈</div>
                    <div class="nav-text">Seguimiento</div>
                </button>
                <button class="nav-item" onclick="showSection('analisis')">
                    <div class="nav-icon">🔬</div>
                    <div class="nav-text">Análisis</div>
                </button>
                <button class="nav-item" onclick="showSection('configuracion')">
                    <div class="nav-icon">⚙️</div>
                    <div class="nav-text">Configuración</div>
                </button>
            </nav>
        </aside>
        
        <!-- MAIN CONTENT -->
        <main class="main-content">
            <header class="main-header">
                <h1 class="header-title" id="pageTitle">Dashboard</h1>
                <div class="header-actions">
                    <button class="btn" onclick="refreshData()">Actualizar</button>
                    <button class="btn btn-primary" onclick="openModal('nuevo-paciente')">Nuevo Paciente</button>
                </div>
            </header>
            
            <div class="content-area">
                <!-- DASHBOARD SECTION -->
                <section id="dashboard" class="content-section active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">Total Pacientes</div>
                                <div class="stat-icon">👥</div>
                            </div>
                            <div class="stat-value" id="totalPacientes">
                                <div class="loading"></div>
                            </div>
                            <div class="stat-change">+3 esta semana</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">Planes Activos</div>
                                <div class="stat-icon">📋</div>
                            </div>
                            <div class="stat-value" id="planesActivos">
                                <div class="loading"></div>
                            </div>
                            <div class="stat-change">+5 este mes</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">Seguimientos Hoy</div>
                                <div class="stat-icon">📈</div>
                            </div>
                            <div class="stat-value" id="seguimientosHoy">
                                <div class="loading"></div>
                            </div>
                            <div class="stat-change">8 completados</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">Adherencia</div>
                                <div class="stat-icon">🎯</div>
                            </div>
                            <div class="stat-value" id="adherencia">
                                <div class="loading"></div>
                            </div>
                            <div class="stat-change">+5% vs mes anterior</div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <div class="action-card" onclick="openModal('nuevo-paciente')">
                            <div class="action-icon">👤</div>
                            <div class="action-title">Nuevo Paciente</div>
                            <div class="action-description">Registrar paciente en el sistema</div>
                        </div>
                        
                        <div class="action-card" onclick="openModal('nuevo-plan')">
                            <div class="action-icon">📋</div>
                            <div class="action-title">Crear Plan</div>
                            <div class="action-description">Generar plan personalizado</div>
                        </div>
                        
                        <div class="action-card" onclick="openModal('seguimiento-diario')">
                            <div class="action-icon">📝</div>
                            <div class="action-title">Seguimiento</div>
                            <div class="action-description">Registrar datos diarios</div>
                        </div>
                        
                        <div class="action-card" onclick="showSection('analisis')">
                            <div class="action-icon">📊</div>
                            <div class="action-title">Análisis</div>
                            <div class="action-description">Ver reportes y métricas</div>
                        </div>
                    </div>
                </section>
                
                <!-- PACIENTES SECTION -->
                <section id="pacientes" class="content-section">
                    <div class="form-section">
                        <h2 class="section-title">Gestión de Pacientes</h2>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Email</th>
                                        <th>Teléfono</th>
                                        <th>Fecha Registro</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="pacientesTable">
                                    <tr>
                                        <td colspan="5" style="text-align: center; padding: 40px;">
                                            <div class="loading"></div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
                
                <!-- PLANES SECTION -->
                <section id="planes" class="content-section">
                    <div class="form-section">
                        <h2 class="section-title">Gestión de Planes</h2>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Plan</th>
                                        <th>Paciente</th>
                                        <th>Tipo</th>
                                        <th>Estado</th>
                                        <th>Fecha</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="planesTable">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 40px;">
                                            <div class="loading"></div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
                
                <!-- SEGUIMIENTO SECTION -->
                <section id="seguimiento" class="content-section">
                    <div class="form-section">
                        <h2 class="section-title">Seguimiento Diario</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">
                            Monitorea el progreso diario de tus pacientes
                        </p>
                        <button class="btn btn-primary" onclick="openModal('seguimiento-diario')">
                            Nuevo Registro
                        </button>
                    </div>
                </section>
                
                <!-- ANÁLISIS SECTION -->
                <section id="analisis" class="content-section">
                    <div class="form-section">
                        <h2 class="section-title">Análisis y Reportes</h2>
                        <p style="color: var(--text-secondary);">
                            Visualiza métricas y tendencias de progreso
                        </p>
                    </div>
                </section>
                
                <!-- CONFIGURACIÓN SECTION -->
                <section id="configuracion" class="content-section">
                    <div class="form-section">
                        <h2 class="section-title">Configuración</h2>
                        <p style="color: var(--text-secondary);">
                            Ajustes del sistema y preferencias
                        </p>
                    </div>
                </section>
            </div>
        </main>
    </div>
    
    <!-- MODAL OVERLAY -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Modal</h2>
                <button class="modal-close" onclick="closeModal()">✕</button>
            </div>
            <div class="modal-content" id="modalContent">
                <!-- Contenido dinámico -->
            </div>
        </div>
    </div>
    
    <!-- SCRIPTS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <script>
        // CONFIGURACIÓN
        const SUPABASE_URL = 'https://uuoxzoqjbquqpvjhszsi.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV1b3h6b3FqYnF1cXB2amhzenNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzNzMzMTksImV4cCI6MjA3Mzk0OTMxOX0.u5Ozw8L83w8oXBluZLUr_gX4PGr5GVlX2FcllFruqtY';
        
        // INICIALIZAR SUPABASE
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // ESTADO GLOBAL
        let currentSection = 'dashboard';
        let sidebarCollapsed = false;
        let pacientesData = [];
        let planesData = [];
        
        // NAVEGACIÓN
        function showSection(sectionName) {
            // Ocultar todas las secciones
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar la sección seleccionada
            document.getElementById(sectionName).classList.add('active');
            
            // Actualizar navegación activa
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            // Actualizar título
            const titles = {
                dashboard: 'Dashboard',
                pacientes: 'Gestión de Pacientes',
                planes: 'Gestión de Planes',
                seguimiento: 'Seguimiento Diario',
                analisis: 'Análisis y Reportes',
                configuracion: 'Configuración'
            };
            
            document.getElementById('pageTitle').textContent = titles[sectionName];
            currentSection = sectionName;
            
            // Cargar datos específicos de la sección
            loadSectionData(sectionName);
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebarCollapsed = !sidebarCollapsed;
            
            if (sidebarCollapsed) {
                sidebar.classList.add('collapsed');
            } else {
                sidebar.classList.remove('collapsed');
            }
        }
        
        // MODALES
        function openModal(type) {
            const overlay = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            switch(type) {
                case 'nuevo-paciente':
                    title.textContent = 'Nuevo Paciente';
                    content.innerHTML = getNuevoPacienteForm();
                    break;
                case 'nuevo-plan':
                    title.textContent = 'Crear Plan';
                    content.innerHTML = getNuevoPlanForm();
                    setTimeout(() => cargarPacientesEnSelect('pacientePlan'), 100);
                    break;
                case 'seguimiento-diario':
                    title.textContent = 'Seguimiento Diario';
                    content.innerHTML = getSeguimientoForm();
                    setTimeout(() => cargarPacientesEnSelect('pacienteSeguimiento'), 100);
                    break;
            }
            
            overlay.classList.add('active');
        }
        
        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
        }
        
        // FORMULARIOS
        function getNuevoPacienteForm() {
            return `
                <form onsubmit="event.preventDefault(); guardarPaciente();">
                    <div class="form-grid">
                        <div>
                            <div class="form-group">
                                <label class="form-label">Nombre Completo</label>
                                <input type="text" class="form-input" placeholder="Nombre y apellidos" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-input" placeholder="email@ejemplo.com" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Teléfono</label>
                                <input type="tel" class="form-input" placeholder="+34 XXX XXX XXX">
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label class="form-label">Fecha de Nacimiento</label>
                                <input type="date" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Condición Principal</label>
                                <select class="form-select">
                                    <option value="">Seleccionar...</option>
                                    <option value="sop">SOP</option>
                                    <option value="estreñimiento">Estreñimiento</option>
                                    <option value="perdida-peso">Pérdida de peso</option>
                                    <option value="inflamacion">Inflamación sistémica</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Notas</label>
                                <textarea class="form-textarea" placeholder="Información adicional..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 24px; text-align: right;">
                        <button type="button" class="btn" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar Paciente</button>
                    </div>
                </form>
            `;
        }
        
        function getNuevoPlanForm() {
            return `
                <form onsubmit="event.preventDefault(); generarPlan();">
                    <div class="form-grid">
                        <div>
                            <div class="form-group">
                                <label class="form-label">Seleccionar Paciente</label>
                                <select class="form-select" required id="pacientePlan">
                                    <option value="">Seleccionar paciente...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tipo de Plan</label>
                                <select class="form-select" required>
                                    <option value="">Seleccionar tipo...</option>
                                    <option value="SOP - Regulación Hormonal">SOP - Regulación Hormonal</option>
                                    <option value="Estreñimiento Severo">Estreñimiento Severo</option>
                                    <option value="Pérdida de Peso">Pérdida de Peso</option>
                                    <option value="Antiinflamatorio">Antiinflamatorio</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Duración</label>
                                <select class="form-select">
                                    <option value="4 semanas">4 semanas</option>
                                    <option value="8 semanas">8 semanas</option>
                                    <option value="16 semanas">16 semanas</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label class="form-label">Condiciones Secundarias</label>
                                <div style="display: grid; gap: 8px; margin-top: 8px;">
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="problemas-digestivos"> Problemas digestivos
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="fatiga-cronica"> Fatiga crónica
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="problemas-sueño"> Problemas de sueño
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="caida-cabello"> Caída del cabello
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Terapias Físicas</label>
                                <div style="display: grid; gap: 8px; margin-top: 8px;">
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="infrarrojo" checked> Terapia Infrarrojo
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="termogenesis"> Termogénesis
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="vagal"> Estimulación Vagal
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Exclusiones Alimentarias</label>
                                <div style="display: grid; gap: 8px; margin-top: 8px;">
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="sin-gluten"> Sin gluten
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="sin-lacteos"> Sin lácteos
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="sin-frutos-secos"> Sin frutos secos
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 24px; text-align: right;">
                        <button type="button" class="btn" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Generar Plan</button>
                    </div>
                </form>
            `;
        }
        
        function getSeguimientoForm() {
            return `
                <form onsubmit="event.preventDefault(); guardarSeguimiento();">
                    <div class="form-grid">
                        <div>
                            <div class="form-group">
                                <label class="form-label">Paciente</label>
                                <select class="form-select" required id="pacienteSeguimiento">
                                    <option value="">Seleccionar paciente...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha</label>
                                <input type="date" class="form-input" value="${new Date().toISOString().split('T')[0]}" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Energía (1-10)</label>
                                <input type="range" min="1" max="10" value="5" class="form-input" oninput="this.nextElementSibling.textContent = this.value">
                                <span style="display: block; text-align: center; margin-top: 4px; font-size: 14px; color: var(--text-secondary);">5</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Calidad del Sueño (1-10)</label>
                                <input type="range" min="1" max="10" value="5" class="form-input" oninput="this.nextElementSibling.textContent = this.value">
                                <span style="display: block; text-align: center; margin-top: 4px; font-size: 14px; color: var(--text-secondary);">5</span>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label class="form-label">Peso (kg)</label>
                                <input type="number" class="form-input" step="0.1" placeholder="70.5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Adherencia al Plan (%)</label>
                                <input type="range" min="0" max="100" value="80" class="form-input" oninput="this.nextElementSibling.textContent = this.value + '%'">
                                <span style="display: block; text-align: center; margin-top: 4px; font-size: 14px; color: var(--text-secondary);">80%</span>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Síntomas</label>
                                <div style="display: grid; gap: 8px; margin-top: 8px;">
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="dolor-abdominal"> Dolor abdominal
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="fatiga"> Fatiga
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px; font-weight: normal;">
                                        <input type="checkbox" value="problemas-digestivos"> Problemas digestivos
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Notas del día</label>
                                <textarea class="form-textarea" placeholder="Observaciones, cambios, comentarios..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 24px; text-align: right;">
                        <button type="button" class="btn" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar Seguimiento</button>
                    </div>
                </form>
            `;
        }
        
        // CARGA DE DATOS
        async function loadSectionData(section) {
            try {
                switch(section) {
                    case 'dashboard':
                        await loadDashboardData();
                        break;
                    case 'pacientes':
                        await loadPacientesData();
                        break;
                    case 'planes':
                        await loadPlanesData();
                        break;
                }
            } catch (error) {
                console.error('Error cargando datos de la sección:', error);
            }
        }
        
        async function loadDashboardData() {
            try {
                const [pacientesRes, planesRes, seguimientosRes] = await Promise.all([
                    supabase.from('pacientes').select('id', { count: 'exact' }),
                    supabase.from('planes_generados').select('id', { count: 'exact' }).eq('estado', 'activo'),
                    supabase.from('seguimiento_diario').select('id', { count: 'exact' })
                        .gte('fecha_registro', new Date().toISOString().split('T')[0])
                ]);
                
                document.getElementById('totalPacientes').textContent = pacientesRes.count || 0;
                document.getElementById('planesActivos').textContent = planesRes.count || 0;
                document.getElementById('seguimientosHoy').textContent = seguimientosRes.count || 0;
                
                const { data: seguimientos } = await supabase
                    .from('seguimiento_diario')
                    .select('adherencia_plan')
                    .not('adherencia_plan', 'is', null);
                
                if (seguimientos && seguimientos.length > 0) {
                    const adherenciaPromedio = seguimientos.reduce((sum, s) => sum + s.adherencia_plan, 0) / seguimientos.length;
                    document.getElementById('adherencia').textContent = Math.round(adherenciaPromedio) + '%';
                } else {
                    document.getElementById('adherencia').textContent = '0%';
                }
                
            } catch (error) {
                console.error('Error cargando datos del dashboard:', error);
                document.getElementById('totalPacientes').textContent = '--';
                document.getElementById('planesActivos').textContent = '--';
                document.getElementById('seguimientosHoy').textContent = '--';
                document.getElementById('adherencia').textContent = '--';
            }
        }
        
        async function loadPacientesData() {
            const table = document.getElementById('pacientesTable');
            
            try {
                const { data: pacientes, error } = await supabase
                    .from('pacientes')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                pacientesData = pacientes || [];
                
                if (pacientes && pacientes.length > 0) {
                    table.innerHTML = pacientes.map(p => `
                        <tr>
                            <td>${p.nombre_completo || 'Sin nombre'}</td>
                            <td>${p.email || 'Sin email'}</td>
                            <td>${p.telefono || 'Sin teléfono'}</td>
                            <td>${new Date(p.created_at).toLocaleDateString('es-ES')}</td>
                            <td>
                                <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="verPaciente('${p.id}')">Ver</button>
                                <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="editarPaciente('${p.id}')">Editar</button>
                                <button class="btn" style="padding: 4px 8px; font-size: 12px; background: #ffebee; color: #c62828;" onclick="eliminarPaciente('${p.id}')">Eliminar</button>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    table.innerHTML = `
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 40px; color: var(--text-secondary);">
                                No hay pacientes registrados
                            </td>
                        </tr>
                    `;
                }
                
            } catch (error) {
                console.error('Error cargando pacientes:', error);
                table.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 40px; color: #c62828;">
                            Error cargando datos de pacientes
                        </td>
                    </tr>
                `;
            }
        }
        
        async function loadPlanesData() {
            const table = document.getElementById('planesTable');
            
            try {
                const { data: planes, error } = await supabase
                    .from('planes_generados')
                    .select(`
                        *,
                        pacientes (nombre_completo)
                    `)
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                planesData = planes || [];
                
                if (planes && planes.length > 0) {
                    table.innerHTML = planes.map(p => `
                        <tr>
                            <td>${p.nombre_plan || 'Plan sin nombre'}</td>
                            <td>${p.pacientes?.nombre_completo || 'Sin paciente'}</td>
                            <td>${p.tipo_plan || 'Sin tipo'}</td>
                            <td>
                                <span style="padding: 2px 8px; border-radius: 4px; font-size: 12px; background: ${
                                    p.estado === 'activo' ? '#e8f5e8' : 
                                    p.estado === 'completado' ? '#e3f2fd' : '#fff3e0'
                                }; color: ${
                                    p.estado === 'activo' ? '#2e7d32' : 
                                    p.estado === 'completado' ? '#1976d2' : '#f57c00'
                                };">
                                    ${p.estado || 'indefinido'}
                                </span>
                            </td>
                            <td>${new Date(p.created_at).toLocaleDateString('es-ES')}</td>
                            <td>
                                <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="verPlan('${p.id}')">Ver</button>
                                <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="editarPlan('${p.id}')">Editar</button>
                                <button class="btn" style="padding: 4px 8px; font-size: 12px; background: #ffebee; color: #c62828;" onclick="eliminarPlan('${p.id}')">Eliminar</button>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    table.innerHTML = `
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 40px; color: var(--text-secondary);">
                                No hay planes generados
                            </td>
                        </tr>
                    `;
                }
                
            } catch (error) {
                console.error('Error cargando planes:', error);
                table.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #c62828;">
                            Error cargando datos de planes
                        </td>
                    </tr>
                `;
            }
        }
        
        // FUNCIONES CRUD
        async function guardarPaciente() {
            const form = document.querySelector('#modalContent form');
            const formData = new FormData(form);
            
            const pacienteData = {
                nombre_completo: form.querySelector('input[placeholder="Nombre y apellidos"]').value.trim(),
                email: form.querySelector('input[type="email"]').value.trim(),
                telefono: form.querySelector('input[type="tel"]').value.trim(),
                fecha_nacimiento: form.querySelector('input[type="date"]').value,
                condicion_principal: form.querySelector('select').value,
                notas: form.querySelector('textarea').value.trim()
            };
            
            if (!pacienteData.nombre_completo) {
                alert('El nombre completo es obligatorio');
                return;
            }
            
            if (!pacienteData.email) {
                alert('El email es obligatorio');
                return;
            }
            
            try {
                const { data, error } = await supabase
                    .from('pacientes')
                    .insert([pacienteData])
                    .select();
                
                if (error) throw error;
                
                closeModal();
                mostrarNotificacion('Paciente guardado correctamente');
                
                if (currentSection === 'pacientes') {
                    await loadPacientesData();
                }
                await loadDashboardData();
                
            } catch (error) {
                console.error('Error guardando paciente:', error);
                alert('Error al guardar el paciente: ' + error.message);
            }
        }
        
        async function generarPlan() {
            const form = document.querySelector('#modalContent form');
            const pacienteSelect = form.querySelector('#pacientePlan');
            const tipoSelect = form.querySelector('select[required]:nth-of-type(2)');
            const duracionSelect = form.querySelector('select:nth-of-type(3)');
            
            const condicionesSecundarias = Array.from(form.querySelectorAll('input[type="checkbox"]:checked'))
                .filter(cb => cb.closest('.form-group').querySelector('.form-label').textContent === 'Condiciones Secundarias')
                .map(cb => cb.value);
            
            const terapiasFisicas = Array.from(form.querySelectorAll('input[type="checkbox"]:checked'))
                .filter(cb => cb.closest('.form-group').querySelector('.form-label').textContent === 'Terapias Físicas')
                .map(cb => cb.value);
            
            const exclusionesAlimentarias = Array.from(form.querySelectorAll('input[type="checkbox"]:checked'))
                .filter(cb => cb.closest('.form-group').querySelector('.form-label').textContent === 'Exclusiones Alimentarias')
                .map(cb => cb.value);
            
            if (!pacienteSelect.value) {
                alert('Debe seleccionar un paciente');
                return;
            }
            
            if (!tipoSelect.value) {
                alert('Debe seleccionar un tipo de plan');
                return;
            }
            
            try {
                const { data: paciente, error: pacienteError } = await supabase
                    .from('pacientes')
                    .select('id')
                    .eq('nombre_completo', pacienteSelect.value)
                    .single();
                
                if (pacienteError) throw pacienteError;
                
                const nuevoPlan = {
                    paciente_id: paciente.id,
                    nombre_plan: `${tipoSelect.value} - ${pacienteSelect.value}`,
                    tipo_plan: tipoSelect.value,
                    duracion_semanas: parseInt(duracionSelect.value.split(' ')[0]),
                    condiciones_secundarias: condicionesSecundarias,
                    terapias_fisicas: terapiasFisicas,
                    exclusiones_alimentarias: exclusionesAlimentarias,
                    estado: 'activo',
                    contenido_plan: await generarContenidoPlan(tipoSelect.value, duracionSelect.value)
                };
                
                const { data, error } = await supabase
                    .from('planes_generados')
                    .insert([nuevoPlan])
                    .select();
                
                if (error) throw error;
                
                closeModal();
                mostrarNotificacion('Plan generado correctamente');
                
                if (currentSection === 'planes') {
                    await loadPlanesData();
                }
                await loadDashboardData();
                
            } catch (error) {
                console.error('Error generando plan:', error);
                alert('Error al generar el plan: ' + error.message);
            }
        }
        
        async function guardarSeguimiento() {
            const form = document.querySelector('#modalContent form');
            const pacienteSelect = form.querySelector('#pacienteSeguimiento');
            const fecha = form.querySelector('input[type="date"]').value;
            const energia = form.querySelector('input[type="range"]:nth-of-type(1)').value;
            const sueno = form.querySelector('input[type="range"]:nth-of-type(2)').value;
            const peso = form.querySelector('input[type="number"]').value;
            const adherencia = form.querySelector('input[type="range"]:nth-of-type(3)').value;
            const notas = form.querySelector('textarea').value.trim();
            
            const sintomas = Array.from(form.querySelectorAll('input[type="checkbox"]:checked'))
                .map(cb => cb.value);
            
            if (!pacienteSelect.value) {
                alert('Debe seleccionar un paciente');
                return;
            }
            
            try {
                const { data: paciente, error: pacienteError } = await supabase
                    .from('pacientes')
                    .select('id')
                    .eq('nombre_completo', pacienteSelect.value)
                    .single();
                
                if (pacienteError) throw pacienteError;
                
                const nuevoSeguimiento = {
                    paciente_id: paciente.id,
                    fecha_registro: fecha,
                    energia_nivel: parseInt(energia),
                    calidad_sueno: parseInt(sueno),
                    peso_kg: peso ? parseFloat(peso) : null,
                    adherencia_plan: parseInt(adherencia),
                    sintomas: sintomas,
                    notas: notas || null
                };
                
                const { data, error } = await supabase
                    .from('seguimiento_diario')
                    .insert([nuevoSeguimiento])
                    .select();
                
                if (error) throw error;
                
                closeModal();
                mostrarNotificacion('Seguimiento guardado correctamente');
                await loadDashboardData();
                
            } catch (error) {
                console.error('Error guardando seguimiento:', error);
                alert('Error al guardar el seguimiento: ' + error.message);
            }
        }
        
        // FUNCIONES AUXILIARES
        async function generarContenidoPlan(tipoPlan, duracion) {
            const duracionSemanas = parseInt(duracion.split(' ')[0]);
            
            let contenido = {
                tipo: tipoPlan,
                duracion_semanas: duracionSemanas,
                protocolo_base: '',
                alimentacion: {},
                terapias: [],
                exclusiones: []
            };
            
            switch(tipoPlan) {
                case 'SOP - Regulación Hormonal':
                    contenido.protocolo_base = 'Ayuno intermitente 16:8, protocolo antiinflamatorio, terapias físicas';
                    contenido.alimentacion = {
                        desayuno: 'Proteína alta + grasas saludables',
                        comida: 'Ensalada + proteína + verduras crucíferas',
                        cena: 'Proteína ligera + verduras'
                    };
                    break;
                case 'Estreñimiento Severo':
                    contenido.protocolo_base = 'Hidratación intensa, fibra específica, terapias procinéticas';
                    contenido.alimentacion = {
                        despertar: 'Agua + limón + MCT',
                        desayuno: 'Grasas + fibra soluble',
                        comida: 'Puré procinético + proteína'
                    };
                    break;
                default:
                    contenido.protocolo_base = 'Protocolo Redox personalizado';
            }
            
            return contenido;
        }
        
        async function cargarPacientesEnSelect(selectId) {
            try {
                const { data: pacientes, error } = await supabase
                    .from('pacientes')
                    .select('id, nombre_completo')
                    .order('nombre_completo', { ascending: true });
                
                if (error) throw error;
                
                const select = document.getElementById(selectId);
                if (select && pacientes) {
                    const defaultOption = select.querySelector('option[value=""]');
                    select.innerHTML = '';
                    if (defaultOption) {
                        select.appendChild(defaultOption);
                    }
                    
                    pacientes.forEach(paciente => {
                        const option = document.createElement('option');
                        option.value = paciente.nombre_completo;
                        option.textContent = paciente.nombre_completo;
                        select.appendChild(option);
                    });
                }
            } catch (error) {
                console.error('Error cargando pacientes en select:', error);
            }
        }
        
        async function eliminarPaciente(id) {
            if (!confirm('¿Estás seguro de que quieres eliminar este paciente? Esta acción no se puede deshacer.')) {
                return;
            }
            
            try {
                const { error } = await supabase
                    .from('pacientes')
                    .delete()
                    .eq('id', id);
                
                if (error) throw error;
                
                mostrarNotificacion('Paciente eliminado correctamente');
                await loadPacientesData();
                await loadDashboardData();
                
            } catch (error) {
                console.error('Error eliminando paciente:', error);
                alert('Error al eliminar el paciente: ' + error.message);
            }
        }
        
        async function eliminarPlan(id) {
            if (!confirm('¿Estás seguro de que quieres eliminar este plan?')) {
                return;
            }
            
            try {
                const { error } = await supabase
                    .from('planes_generados')
                    .delete()
                    .eq('id', id);
                
                if (error) throw error;
                
                mostrarNotificacion('Plan eliminado correctamente');
                await loadPlanesData();
                await loadDashboardData();
                
            } catch (error) {
                console.error('Error eliminando plan:', error);
                alert('Error al eliminar el plan: ' + error.message);
            }
        }
        
        // FUNCIONES PLACEHOLDER
        function verPaciente(id) {
            alert('Función de ver paciente en desarrollo');
        }
        
        function editarPaciente(id) {
            alert('Función de editar paciente en desarrollo');
        }
        
        function verPlan(id) {
            alert('Función de ver plan en desarrollo');
        }
        
        function editarPlan(id) {
            alert('Función de editar plan en desarrollo');
        }
        
        // UTILIDADES
        async function refreshData() {
            try {
                await loadSectionData(currentSection);
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Actualizado ✓';
                btn.style.background = '#e8f5e8';
                btn.style.color = '#2e7d32';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                    btn.style.color = '';
                }, 2000);
            } catch (error) {
                console.error('Error actualizando datos:', error);
                alert('Error al actualizar los datos');
            }
        }
        
        function mostrarNotificacion(mensaje, tipo = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${tipo === 'success' ? '#e8f5e8' : tipo === 'error' ? '#ffebee' : '#f5f5f5'};
                color: ${tipo === 'success' ? '#2e7d32' : tipo === 'error' ? '#c62828' : '#1a1a1a'};
                padding: 16px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                z-index: 10000;
                max-width: 400px;
                border: 1px solid ${tipo === 'success' ? '#c8e6c9' : tipo === 'error' ? '#ffcdd2' : '#e0e0e0'};
            `;
            
            notification.textContent = mensaje;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }
        
        // EVENTOS
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
        
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // INICIALIZACIÓN
        async function initializeApp() {
            try {
                // Verificar conexión con Supabase
                if (SUPABASE_URL === 'https://your-project.supabase.co' || 
                    SUPABASE_ANON_KEY === 'your-anon-key') {
                    
                    console.warn('⚠️ CONFIGURACIÓN REQUERIDA: Debes configurar las credenciales de Supabase');
                    mostrarNotificacion('Configurar credenciales de Supabase en el código', 'error');
                    
                    // Mostrar datos de prueba
                    setTimeout(() => {
                        document.getElementById('totalPacientes').textContent = '0';
                        document.getElementById('planesActivos').textContent = '0';
                        document.getElementById('seguimientosHoy').textContent = '0';
                        document.getElementById('adherencia').textContent = '0%';
                    }, 1000);
                    return;
                }
                
                const { data, error } = await supabase.from('pacientes').select('count', { count: 'exact' });
                
                if (error) {
                    console.error('Error conectando con Supabase:', error);
                    document.querySelectorAll('.loading').forEach(el => {
                        el.style.display = 'none';
                        el.parentElement.innerHTML = '<span style="color: #c62828;">Error de conexión</span>';
                    });
                    return;
                }
                
                console.log('Conectado con Supabase exitosamente');
                await loadDashboardData();
                
            } catch (error) {
                console.error('Error inicializando aplicación:', error);
                mostrarNotificacion('Error de conexión con la base de datos', 'error');
            }
        }
        
        // RESPONSIVE
        if (window.innerWidth <= 768) {
            document.querySelector('.main-header').insertAdjacentHTML('afterbegin', 
                '<button style="background: none; border: none; margin-right: 16px; font-size: 18px; cursor: pointer;" onclick="toggleMobileMenu()">☰</button>'
            );
        }
        
        function toggleMobileMenu() {
            document.getElementById('sidebar').classList.toggle('mobile-open');
        }
        
        // MANEJO DE ERRORES GLOBAL
        window.addEventListener('error', function(e) {
            console.error('Error global:', e.error);
            mostrarNotificacion('Ha ocurrido un error inesperado', 'error');
        });
        
        // INICIALIZAR AL CARGAR EL DOM
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
    </script>
</body>
</html>